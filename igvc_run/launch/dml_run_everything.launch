<!--igvc_run.launch-->
<launch>

<!-- =============   TRANSFORMS  ======================= -->
<!-- TODO add transforms as a seperate launch file so when they change here they change in all launch files, like bag and demos -->
<include file="$(find igvc_run)/launch/tf.launch"></include>


<!-- =============   NODES and Launch Files  ======================= -->
<node name="novatel_CNS5000_imu" pkg="gps_imu" type="imu_parser.py" output="screen"/>
<node name="novatel_CNS5000" pkg="gps_imu" type="usma_novatel_driver.py" output="screen"/>

<!--utm odom converter node for goal location
<node name="gps_goal_conv" pkg="gps_common" type="utm_odometry_node">
  <remap from="odom" to="goal_utm"/>
  <remap from="fix" to="goal_gps" />
</node>-->

<!--utm odom converter node for current location-->
<node name="gps_conv" pkg="gps_common" type="utm_odometry_node">
  <remap from="odom" to="vo"/>
  <remap from="fix" to="gps/fix" />
  <param name="frame_id" value="base_footprint" />
</node>

<node name="odom_generator" pkg="odom_generator" type="odom_generator"> </node>

<include file="$(find robot_localization)/launch/navsat_transform_template.launch"></include>

<include file="$(find robot_localization)/launch/ekf_template.launch"></include>

<include file="$(find igvc_run)/launch/move_base.launch"></include>

<include file="$(find roboteq)/launch/roboteq_driver.launch"></include> 

<include file="$(find velodyne_bringup)/launch/igvc_velodyne.launch"></include>

<!--vision3d-->
<!--
<node pkg="triclops_vision" type="triclops_camera_driver" name="triclops_camera_driver" output="screen"></node>
<node pkg="triclops_vision" type="Hansing_converter.py" name="red_blue_flag_filter" output="screen"></node>-->
<include file="$(find usma_triclops)/launch/threeNodebumblebee.launch"></include>

<!--<node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node" output="screen"> 
	<remap from="/imu_data" to="/imu/data"/>   
	<param name="cloud" value="/velodyne_points"/>
	<param name="use_cloud_input" value="yes"/>
	<param name="max_iterations" value="10"/>    
	<param name="use_imu" type="bool" value="true" />    
	<param name="use_odom" type="bool" value="false" />    
	<param name="fixed_frame" type="string" value="/map" />    
	<param name="base_frame" type="string" value="/base_footprint" />
</node>-->

<!--creates bag files that get overwritten each time this runs-->
<!--<include file="$(find igvc_run)/launch/rosbag_record.launch"></include>-->

<!--start ros bridge for user interface-->
<node name="rosbridge" pkg="rosbridge_server" type="rosbridge_websocket"/>

<!-- Start an rviz node with a custom configuration  -->
<!-- <node pkg="rviz" type="rviz" output="screen" name="rviz" args="-d $(find igvc_run)/launch/igvc_run_everything.rviz"/> -->
</launch>

