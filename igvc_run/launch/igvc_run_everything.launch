<!--igvc_run.launch-->
<launch>

<!-- =============   TRANSFORMS  ======================= -->
<!-- TODO add transforms as a seperate launch file so when they change here they change in all launch files, like bag and demos -->
<include file="$(find igvc_run)/launch/tf.launch"></include>


<!-- =============   NODES and Launch Files  ======================= -->
<!--<include file="$(find xsens_driver)/launch/xsens_driver.launch"></include>-->

<!--utm odom converter node for current location-->
<node name="gps_conv" pkg="gps_common" type="utm_odometry_node">
  <remap from="odom" to="vo"/>
  <remap from="fix" to="gps/fix" />
  <param name="frame_id" value="base_footprint" />
</node>

<node name="odom_generator" pkg="odom_generator" type="odom_generator"> </node>

<!--<include file="$(find robot_localization )/launch/navsat_transform_template.launch"></include>-->

<!--<include file="$(find robot_localization)/launch/ekf_template.launch"></include>-->

<include file="$(find igvc_run)/launch/move_base.launch"></include>

<include file="$(find usma_roboteq)/launch/roboteq_driver.launch"></include> 

<include file="$(find velodyne_bringup)/launch/igvc_velodyne.launch"></include>

<!-- ================= VISION!!!!! ====================== -->
<include file="$(find igvc_run)/launch/igvc_stereo.launch"></include>

<!--vision3d
<node pkg="triclops_vision" type="triclops_camera_driver" name="triclops_camera_driver" output="screen"></node>
<node pkg="triclops_vision" type="Hansing_converter.py" name="red_blue_flag_filter" output="screen"></node>
<include file="$(find usma_triclops)/launch/threeNodebumblebee.launch"></include>

<node name="hacked_odom" pkg="igvc_run" type="hacked_odom.py" output="screen"/> 
<node name="heading_magnetic" pkg="igvc_run" type="headingFromMagnetic.py" output="screen"/>
-->
<node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node" output="screen"> 
	<remap from="/imu_data" to="/imu/data"/>   
	<param name="cloud" value="/velodyne_points"/>
	<param name="use_cloud_input" value="yes"/>
	<param name="max_iterations" value="10"/>    
	<param name="use_imu" type="bool" value="true" />    
	<param name="use_odom" type="bool" value="false" />    
	<param name="fixed_frame" type="string" value="/map" />    
	<param name="base_frame" type="string" value="/base_footprint" />
</node>

<!--connects the arduino to the computer
<node pkg="rosserial_python" type="serial_node.py" name="serial_node">
    <param name="port" value="/dev/arduino"/>
    <param name="baud" value="57600"/>
</node>
-->
<!--creates bag files that get overwritten each time this runs-->
<!--<include file="$(find igvc_run)/launch/rosbag_record.launch"></include>-->


<!--start ros bridge for user interface
<node name="rosbridge" pkg="rosbridge_server" type="rosbridge_websocket"/>-->

<!-- Start an rviz node with a custom configuration  -->
<node pkg="rviz" type="rviz" output="screen" name="rviz" args="-d $(find igvc_run)/launch/igvc_run_everything.rviz"/> 

</launch>

