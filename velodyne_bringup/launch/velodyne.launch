<!--
Copyright 2011, 2012 Massachusetts Institute of Technology

This work is sponsored by the Department of the Air Force under Air Force
Contract #FA8721-05-C-0002. Opinions, interpretations, conclusions and
recommendations are those of the authors and are not necessarily endorsed by the
United States Government.
-->

<!--
    Start the Velodyne driver and pointcloud generator.

    This launch file will start its own nodelet manager.

    Optional Arguments:
     - pcap - (str) Use a given packet capture file, rather than the physical
                hardware.
     - manager - (str) Override the default manager name
     - structured - (bool) Change to a structured playback.
-->

<launch>
    <arg name="pcap" default=""/>
    <arg name="structured" default="false"/>

    <arg name="manager" value="velodyne_nodelet_manager"/>

    <node name="$(arg manager)" type="nodelet" pkg="nodelet" args="manager"/>

    <include file="$(find velodyne_bringup)/launch/velodyne_driver.xml">
        <arg name="manager" value="$(arg manager)"/>
        <arg name="pcap" value="$(arg pcap)"/>
    </include>

    <include file="$(find velodyne_bringup)/launch/velodyne_pointcloud.xml">
        <arg name="manager" value="$(arg manager)"/>
        <arg name="structured" value="$(arg structured)"/>
    </include>
</launch>

